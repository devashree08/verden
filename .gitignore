// Single source of truth for row identity & custom detection.

export const isCustom = (r) =>
  !!(r?.isCustom || r?.customAttributeDefinition != null || r?.customAttributeNum != null);

/** Stable key:
 *  - Custom:  org|sub|ml|C|0|customNum
 *  - Baseline:org|sub|ml|B|csf1|attrNum
 */
export const rowKey = (r) => {
  const org = String(r?.orgID ?? '0');
  const sub = String(r?.csF2SubcategoryID ?? '0');
  const ml  = String(r?.maturityLevel ?? '0');
  if (isCustom(r)) {
    return `${org}|${sub}|${ml}|C|0|${String(r?.customAttributeNum ?? '0')}`;
  }
  const csf1 = String(r?.csF1SubcategoryID ?? '0');
  return `${org}|${sub}|${ml}|B|${csf1}|${String(r?.attributeNum ?? '0')}`;
};

